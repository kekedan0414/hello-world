**一句话说清楚什么是微服务**

以前程序是单机模式存在一些弊端，

+ 耦合性高，一点小改动就需要程序升级。

+ 单体架构无法应对高流量高并发。

微服务就是把单体系统拆分成多个应用，并进行分布式部署，一起协作的一种软件架构模式。

**微服务四大原则**：

+ 高内聚，低耦合
+ 前后端分离
+ 无状态访问
+ restful风格

贫血模型：数据与业务逻辑分离，违反了OOP的封装特性，实际上是一种面向过程的编程风格。

弊端：

1、数据和操作分离后，数据本身的操作不受控制，任何代码都可以修改他。可控性较差。

2、随着产品迭代，业务增加，业务层的代码复杂度会提升，难以维护。另外如果是以SQL驱动的业务逻辑，可能会写很多相似的sql，产生大量的冗余。这种开发方式会导致代码越来越混乱，最终导致难以维护。

充血模型：

为什么大部分都是贫血模型，而非充血模型？

1是业务场景简单，基于sql的crud就可以应付。

2是冲血模型需要精心设计，门槛较高。简单的业务逻辑使用冲血模型来实现，反而提高了系统本身的复杂度，适得其反。

3是目前大部分开发人员，企业，项目都是基于贫血模型的，改造、学习有陈本。

微服务不仅有监控，API网关，调用链追踪，服务治理等，微服务的拆分也是非常重要的一个环节。

微服务如何拆分：现在微服务的拆分十分的困难，其根本原因是不知道业务和微服务的边界如何拆分。

领域驱动就是一套方法论，通过DDD领域驱动设计来指导微服务拆分。

DDD（Domain Driver Design）领域驱动设计

核心思想：根据业务来划分领域，把合适的代码放到合适的位置。

MVC传统三层以技术为导向，后端代码一般分为控制层Controller对外提供服务，Service实现业务逻辑，Dao层pojo来持久化数据库数据。

DDD四层：以业务来导向。

Interface 用户接口层：

 Application应用层：接口层和领域层的中转层，承担本领域非核心业务代码的编写，调用Domain或其他的领域服务进行组合、编排来实现具体业务。

Domain领域层：沉淀本业务的核心逻辑，尽可能纯净，不会有和其他业务耦合的代码。做业务的隔离，然后在domain层以技术分层的方式在内部做内聚，比如自己的entity，mapper，pojo，核心service做聚合，都定义在本domain文件夹下，而以前没做业务隔离前全是放在一个文件下的。

Infrastructure基础设施层提供技术服务（MQ中间件，缓存，Dao（或Repository），Util工具，网关）



### 注册中心

每个微服务启动的时候会发一条注册信息（IP地址，端口号，服务名称，方法）给注册中心。



注册中心有一个Map存放这些信息。





AOP

IOC

​	循环依赖问题

对象与Spring对象区别

dubbo

​	架构图

​	dubbo协议

​	容错

​	负载均衡